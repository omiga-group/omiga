const { GoGenerator } = require("@asyncapi/modelina");
const { File } = require("@asyncapi/generator-react-sdk");

export default async function ({ asyncapi, params }) {
  const generator = new GoGenerator();
  const models = await generator.generate(asyncapi);

  const payloadContent = `
// Code generated by go-omiga-template, DO NOT EDIT.

package ${params.packageName}

import (
	"context"
)

type Subscriber interface {
  Handle(ctx context.Context, event ${models[0].modelName}) error
}
`;

  return <File name="handler_eventgen.go">{payloadContent}</File>;
}
